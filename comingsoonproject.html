<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Coffeels - Kopi Gula Aren dan Matcha Latte</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            bg: '#fffdfa',
            coffee: '#6b3f2b',
            matcha: '#2f6b3b',
            muted: '#6b6b6b',
            accent: '#c89f6b',
          },
          boxShadow: {
            card: '0 6px 18px rgba(50,30,10,0.12)',
            heavy: '0 12px 40px rgba(50,30,10,0.18)'
          },
          borderRadius: {
            soft: '18px'
          }
        }
      }
    }
  </script>

  <style>
    html { scroll-behavior: smooth; }
    /* small helpers */
    .shadow-card { box-shadow: 0 6px 18px rgba(50,30,10,0.12); }
    .soft-radius { border-radius: 18px; }
    /* drawer animation */
    .drawer-enter { transform: translateX(100%); }
    .drawer-enter-active { transform: translateX(0); transition: transform .28s cubic-bezier(.2,.9,.2,1); }
    .drawer-exit { transform: translateX(0); }
    .drawer-exit-active { transform: translateX(100%); transition: transform .22s cubic-bezier(.2,.9,.2,1); }
  </style>
</head>
<body class="bg-bg text-[#1b1b1b] font-[Poppins] antialiased min-h-screen">

  <!-- App container -->
  <div class="max-w-xl mx-auto min-h-screen">

    <!-- Sticky Header -->
    <header class="sticky top-0 z-40 bg-bg backdrop-blur-md border-b border-[#eae6e2]">
      <div class="flex items-center justify-between px-4 py-3">
        <div class="flex items-center gap-3">
          <img src="https://i.ibb.co/xtMWTHN0/C-20251027-203300-0000.png" alt="Coffeels logo" class="w-12 h-12 rounded-xl object-contain shadow-card">
          <div>
            <h1 class="text-lg font-semibold text-coffee">Coffeels</h1>
            <p class="text-xs text-muted -mt-0.5">Kopi Gula Aren dan Matcha Latte</p>
          </div>
        </div>

        <div class="flex items-center gap-2">
          <button id="btnCartTop" class="relative bg-gradient-to-b from-coffee to-[#744a35] text-white px-3 py-2 rounded-xl shadow-card text-sm font-semibold hover:scale-105 transition">
            ðŸ›’ <span id="cartCountTop">0</span>
          </button>
        </div>
      </div>
    </header>

    <!-- HERO -->
    <main class="p-4 pb-28">
      <section class="rounded-2xl overflow-hidden shadow-card mb-5">
        <div class="h-64 bg-cover bg-center flex items-end" style="background-image:url('https://i.ibb.co/vv48Ytyj/Coffeels-20251027-190740-0000.png')">
          <div class="w-full bg-gradient-to-b from-transparent to-black/40 p-5">
            <h2 class="text-white text-xl font-semibold">Rasakan Hangatnya Kopi Gula Aren</h2>
            <p class="text-white/90 text-sm mt-1">Atau nikmati kelembutan Matcha Latte bersama teman</p>
          </div>
        </div>
      </section>

      <!-- Produk -->
      <section class="mb-6">
        <h3 class="text-coffee font-semibold text-lg mb-3">Produk Pilihan</h3>

        <div class="space-y-4">
          <!-- Kopi Gula Aren -->
          <div class="bg-white p-4 rounded-2xl shadow-card flex items-center gap-3 hover:shadow-lg transition">
            <img src="https://i.ibb.co/YB0jYF7Y/5093-removebg-preview.png" alt="Kopi Gula Aren" class="w-24 h-24 object-contain rounded-lg">
            <div class="flex-1">
              <h4 class="font-semibold">Kopi Gula Aren</h4>
              <div class="text-coffee font-bold text-sm">Rp 7.000</div>
              <p class="text-muted text-sm mt-1">Perpaduan espresso susu dan gula aren alami bisa disajikan hangat atau dingin.</p>
            </div>
            <button onclick="openProductModal('Kopi Gula Aren',7000)" class="bg-gradient-to-b from-coffee to-[#6a3c29] text-white px-4 py-2 rounded-xl font-semibold hover:scale-105 transition">Pesan</button>
          </div>

          <!-- Matcha Latte -->
          <div class="bg-white p-4 rounded-2xl shadow-card flex items-center gap-3 hover:shadow-lg transition">
            <img src="https://i.ibb.co/sJwTL2k0/5337-removebg-preview.png" alt="Matcha Latte" class="w-24 h-24 object-contain rounded-lg">
            <div class="flex-1">
              <h4 class="font-semibold">Matcha Latte</h4>
              <div class="text-coffee font-bold text-sm">Rp 7.000</div>
              <p class="text-muted text-sm mt-1">Matcha premium berpadu susu segar yang lembut dan creamy.</p>
            </div>
            <button onclick="openProductModal('Matcha Latte',7000)" class="bg-gradient-to-b from-matcha to-[#3f7a46] text-white px-4 py-2 rounded-xl font-semibold hover:scale-105 transition">Pesan</button>
          </div>
        </div>
      </section>

      <!-- Topping -->
      <section class="mb-8">
        <h3 class="text-coffee font-semibold text-lg mb-3">Topping Tersedia</h3>
        <div class="flex gap-3">
          <div class="bg-white p-3 rounded-2xl shadow-card text-center w-36">
            <b>Oreo</b>
            <div class="text-sm">sekitar Rp 3.000</div>
          </div>
          <div class="bg-white p-3 rounded-2xl shadow-card text-center w-36">
            <b>Caramel</b>
            <div class="text-sm">sekitar Rp 3.000</div>
          </div>
        </div>
      </section>

      <!-- Footer text (keperluan info) -->
      <section class="text-center text-muted text-sm pb-8">
        <div>SMKN 1 Grati Kelas X TKI 2 | Â© 2025 Coffeels</div>
        <div class="mt-1">Hubungi kami di WhatsApp 085739713359
        </div>
        <div class="mt-1">Development - Project K</div>
      </section>
    </main>

    <!-- Floating Up/Down + Quick WA -->
    <div class="fixed right-4 bottom-6 z-50 flex flex-col gap-3">
      <button onclick="window.scrollTo({ top: 0, behavior: 'smooth' })" class="w-12 h-12 rounded-full bg-gradient-to-b from-coffee to-[#6a3c29] text-white shadow-lg flex items-center justify-center hover:scale-105 transition">â¬†</button>
      <button onclick="window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' })" class="w-12 h-12 rounded-full bg-gradient-to-b from-matcha to-[#3f7a46] text-white shadow-lg flex items-center justify-center hover:scale-105 transition">â¬‡</button>
      <a href="https://wa.me/6285739713359" target="_blank" rel="noopener" class="w-12 h-12 rounded-full bg-gradient-to-b from-coffee to-[#6a3c29] text-white shadow-lg flex items-center justify-center hover:scale-105 transition">ðŸ’¬</a>
    </div>

    <!-- Product Modal (centered) -->
    <div id="productModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50 px-4">
      <div class="bg-white rounded-2xl p-5 w-full max-w-md shadow-heavy">
        <div class="flex justify-between items-start gap-3">
          <div>
            <h3 id="modalProductName" class="text-coffee text-lg font-semibold"></h3>
            <div id="modalProductPrice" class="text-sm text-muted mt-1"></div>
          </div>
          <button onclick="closeProductModal()" class="text-muted text-xl font-bold leading-none">âœ•</button>
        </div>

        <div class="mt-4 space-y-3">
          <!-- Kriteria produk (hangat/dingin) -->
          <div>
            <label class="text-sm font-medium text-muted block mb-1">Kriteria produk</label>
            <div class="grid grid-cols-2 gap-2">
              <button type="button" data-criteria="Hangat" class="criteria-btn py-2 rounded-lg border border-gray-200">Hangat</button>
              <button type="button" data-criteria="Dingin" class="criteria-btn py-2 rounded-lg border border-gray-200">Dingin</button>
            </div>
          </div>

          <!-- Quantity -->
          <div>
            <label class="text-sm font-medium text-muted block mb-1">Jumlah</label>
            <div class="flex items-center gap-2">
              <button id="qtyMinus" class="w-10 h-10 rounded-lg bg-white border border-gray-200">âˆ’</button>
              <input id="qtyInput" type="number" min="1" value="1" class="w-20 text-center rounded-lg border border-gray-200 p-2" />
              <button id="qtyPlus" class="w-10 h-10 rounded-lg bg-white border border-gray-200">+</button>
              <div class="ml-auto text-sm text-muted">Rp <span id="singlePrice">0</span> /pcs</div>
            </div>
          </div>

          <!-- Topping -->
          <div>
            <label class="text-sm font-medium text-muted block mb-1">Topping</label>
            <select id="toppingSelect" class="w-full rounded-lg border border-gray-200 p-2">
              <option value="Tanpa topping">Tanpa topping</option>
              <option value="Oreo (sekitar Rp 3.000)">Oreo (sekitar Rp 3.000)</option>
              <option value="Caramel (sekitar Rp 3.000)">Caramel (sekitar Rp 3.000)</option>
            </select>
          </div>

          <!-- Actions -->
          <div class="flex gap-3 justify-end">
            <button onclick="closeProductModal()" class="px-4 py-2 rounded-lg text-muted border border-gray-200">Batal</button>
            <button id="addToCartBtn" class="px-4 py-2 rounded-lg bg-gradient-to-b from-coffee to-[#6a3c29] text-white font-semibold">Tambah ke Keranjang</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Cart Drawer (slide-in) -->
    <aside id="cartDrawer" class="fixed top-0 right-0 h-full w-full max-w-xs bg-bg shadow-heavy transform translate-x-full z-50">
      <div class="p-4 flex items-center justify-between border-b border-[#eee]">
        <div class="flex items-center gap-3">
          <img src="https://i.ibb.co/xtMWTHN0/C-20251027-203300-0000.png" class="w-10 h-10 rounded-lg object-contain shadow-card" alt="logo">
          <div>
            <div class="text-sm font-semibold text-coffee">Keranjang</div>
            <div id="drawerCount" class="text-xs text-muted">0 item</div>
          </div>
        </div>
        <button onclick="closeCart()" class="text-muted font-bold">âœ•</button>
      </div>

      <div id="drawerContent" class="p-4 overflow-y-auto h-[calc(100%-180px)] space-y-3">
        <!-- items inserted here -->
      </div>

      <div class="p-4 border-t border-[#eee]">
        <div class="flex justify-between items-center mb-3">
          <div class="text-muted">Total</div>
          <div class="font-semibold text-coffee">Rp <span id="drawerTotal">0</span></div>
        </div>
        <div class="flex gap-2">
          <button onclick="clearCart()" class="flex-1 px-3 py-2 rounded-lg text-muted border border-gray-200">Kosongkan</button>
          <button onclick="checkout()" class="flex-1 px-3 py-2 rounded-lg bg-gradient-to-b from-matcha to-[#3f7a46] text-white font-semibold">Pesan Sekarang</button>
        </div>
      </div>
    </aside>

  </div>

  <!-- Scripts -->
  <script>
    // Data
    const WA_NUMBER = "6285739713359"; // tetap nomor WA ini
    let cart = []; // { product, price, qty, topping, criteria }
    let current = { product: null, price: 0, criteria: 'Hangat' };

    // Elements
    const productModal = document.getElementById('productModal');
    const modalProductName = document.getElementById('modalProductName');
    const modalProductPrice = document.getElementById('modalProductPrice');
    const qtyInput = document.getElementById('qtyInput');
    const qtyPlus = document.getElementById('qtyPlus');
    const qtyMinus = document.getElementById('qtyMinus');
    const singlePriceEl = document.getElementById('singlePrice');
    const toppingSelect = document.getElementById('toppingSelect');
    const addToCartBtn = document.getElementById('addToCartBtn');
    const drawer = document.getElementById('cartDrawer');
    const drawerContent = document.getElementById('drawerContent');
    const drawerTotal = document.getElementById('drawerTotal');
    const drawerCount = document.getElementById('drawerCount');
    const cartCountTop = document.getElementById('cartCountTop');
    const btnCartTop = document.getElementById('btnCartTop');

    // open product modal
    function openProductModal(name, price) {
      current.product = name;
      current.price = price;
      current.criteria = 'Hangat';
      modalProductName.textContent = name;
      modalProductPrice.textContent = 'Harga: Rp ' + price.toLocaleString();
      singlePriceEl.textContent = price.toLocaleString();
      qtyInput.value = 1;
      toppingSelect.value = 'Tanpa topping';
      // criteria buttons visual
      document.querySelectorAll('.criteria-btn').forEach(btn => {
        btn.classList.remove('bg-coffee','text-white');
        if (btn.dataset.criteria === 'Hangat') {
          btn.classList.add('bg-coffee','text-white');
        }
      });
      productModal.classList.remove('hidden');
      productModal.classList.add('flex');
    }

    function closeProductModal() {
      productModal.classList.add('hidden');
      productModal.classList.remove('flex');
    }

    // qty controls
    qtyPlus.addEventListener('click', () => { qtyInput.value = parseInt(qtyInput.value || 1) + 1; });
    qtyMinus.addEventListener('click', () => { qtyInput.value = Math.max(1, parseInt(qtyInput.value || 1) - 1); });

    // criteria buttons
    document.querySelectorAll('.criteria-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.criteria-btn').forEach(b => b.classList.remove('bg-coffee','text-white'));
        btn.classList.add('bg-coffee','text-white');
        current.criteria = btn.dataset.criteria;
      });
    });

    // add to cart
    addToCartBtn.addEventListener('click', () => {
      const qty = Math.max(1, parseInt(qtyInput.value || 1));
      const topping = toppingSelect.value;
      if (!current.product) return;
      // push
      cart.push({
        product: current.product,
        price: current.price,
        qty,
        topping,
        criteria: current.criteria
      });
      saveCartToStorage();
      closeProductModal();
      openCart();
      renderDrawer();
    });

    // render drawer content
    function renderDrawer() {
      drawerContent.innerHTML = '';
      if (cart.length === 0) {
        drawerContent.innerHTML = '<div class="text-center text-muted">Belum ada pesanan.</div>';
      } else {
        cart.forEach((item, idx) => {
          const subtotal = item.price * item.qty;
          const itemEl = document.createElement('div');
          itemEl.className = 'bg-white p-3 rounded-xl shadow-card flex justify-between items-start gap-3';
          itemEl.innerHTML = `
            <div class="flex-1">
              <div class="font-semibold">${item.product}</div>
              <div class="text-sm text-muted">${item.criteria} â€¢ ${item.topping}</div>
              <div class="text-sm text-coffee font-semibold mt-2">x${item.qty} â€” Rp ${subtotal.toLocaleString()}</div>
            </div>
            <div class="flex flex-col gap-2 items-end">
              <button class="text-sm text-muted" onclick="decrease(${idx})">âˆ’</button>
              <button class="text-sm text-muted" onclick="increase(${idx})">+</button>
              <button class="text-red-500 font-bold mt-2" onclick="removeItem(${idx})">Hapus</button>
            </div>
          `;
          drawerContent.appendChild(itemEl);
        });
      }
      updateTotals();
    }

    function updateTotals() {
      const total = cart.reduce((s, it) => s + it.price * it.qty, 0);
      drawerTotal.textContent = total.toLocaleString();
      drawerCount.textContent = cart.length + (cart.length === 1 ? " item" : " items");
      cartCountTop.textContent = cart.length;
    }

    // cart operations
    function removeItem(i) { cart.splice(i,1); saveCartToStorage(); renderDrawer(); }
    function clearCart() { cart = []; saveCartToStorage(); renderDrawer(); }
    function increase(i) { cart[i].qty += 1; saveCartToStorage(); renderDrawer(); }
    function decrease(i) { cart[i].qty = Math.max(1, cart[i].qty - 1); saveCartToStorage(); renderDrawer(); }

    // open/close cart drawer
    function openCart() {
      drawer.style.transform = 'translateX(0)';
      drawer.style.transition = 'transform .28s cubic-bezier(.2,.9,.2,1)';
      // set max width for smaller screens
      drawer.classList.remove('translate-x-full');
      renderDrawer();
    }
    function closeCart() {
      drawer.style.transform = 'translateX(100%)';
      drawer.style.transition = 'transform .22s cubic-bezier(.2,.9,.2,1)';
    }

    // top cart button
    btnCartTop.addEventListener('click', () => {
      openCart();
    });

    // checkout -> WA
    function checkout() {
      if (cart.length === 0) { alert('Keranjang masih kosong.'); return; }
      let message = "Hai saya ingin memesan:\n\n";
      let total = 0;
      cart.forEach(item => {
        const subtotal = item.price * item.qty;
        total += subtotal;
        message += `â€¢ ${item.product} â€” ${item.criteria} â€” ${item.topping} x${item.qty} = Rp ${subtotal.toLocaleString()}\n`;
      });
      message += `\nTotal: Rp ${total.toLocaleString()}\n\nTerima kasih.`;
      const url = `https://wa.me/${WA_NUMBER}?text=` + encodeURIComponent(message);
      window.open(url, '_blank');
    }

    // persistence
    function saveCartToStorage(){
      try { localStorage.setItem('coffeels_cart_v1', JSON.stringify(cart)); } catch(e){}
      updateTotals();
    }
    function loadCartFromStorage(){
      try {
        const data = localStorage.getItem('coffeels_cart_v1');
        if (data) cart = JSON.parse(data);
      } catch(e){}
      updateTotals();
    }

    // initialize
    loadCartFromStorage();
    renderDrawer();

    // close modal on background click
    productModal.addEventListener('click', (e) => {
      if (e.target === productModal) closeProductModal();
    });

    // keyboard escape to close drawer/modal
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeProductModal();
        closeCart();
      }
    });

    // initial drawer position hidden
    closeCart();

    // ensure qty input min = 1
    qtyInput.addEventListener('input', () => { if (!qtyInput.value || parseInt(qtyInput.value) < 1) qtyInput.value = 1; });

    // quick save whenever page unloads
    window.addEventListener('beforeunload', saveCartToStorage);
  </script>

</body>
</html>
